@model MPSIGestionSoftSony.Models.equipement

@{
    ViewBag.Title = "Edit";
}
<link href="https://fonts.googleapis.com/css?family=Caveat+Brush" rel="stylesheet">

<h2 class="align-center" style="font-family: 'Caveat Brush', cursive;">Modifier equipement @ViewBag.Categorie</h2>
<div class="input-group"></div>
<div class="input-group"></div>
<div class="input-group"></div>

<div class="card container">

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">




                <div class="form-group ">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <div class="form-group" @( ViewBag.Active != "uc" ? "hidden" : "")>
                        @Html.LabelFor(model => model.Machine, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Machine, new { htmlAttributes = new { @class = "form-control ", placeholder = " Machine", minlength = 3 } })
                                @Html.ValidationMessageFor(model => model.Machine, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>


                    <div class="form-group" @( ViewBag.Active == "uc" ? "hidden" : "")>
                        @Html.LabelFor(model => model.Marque, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Marque, new { htmlAttributes = new { @class = "form-control ", placeholder = " Marque", minlength = 3 } })
                                @Html.ValidationMessageFor(model => model.Marque, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>


                    <div class="form-group" @( ViewBag.Active != "uc" ? "hidden" : "")>
                        @Html.LabelFor(model => model.WinProdKey, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5">
                            <div class="form-line">
                                @Html.EditorFor(model => model.WinProdKey, new { htmlAttributes = new { @class = "form-control", placeholder = "Win Prod Key", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.WinProdKey, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>

                    <div class="form-group" @( ViewBag.Active != "uc" ? "hidden" : "")>
                        @Html.LabelFor(model => model.Application, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Application, new { htmlAttributes = new { @class = "form-control", placeholder = " Application", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.Application, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>

                    <div class="">
                        @Html.LabelFor(model => model.Etat, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class=" ">
                                <div class="">

                                    <div class="row clearfix">
                                        <div class="form-line col-sm-6">
                                            <select class="form-control show-tick" name="Etat" id="Etat" required>
                                                <option value="">-- Please select --</option>
                                                <option value="Service" @( ViewBag.Etat == "Service" ? "selected='selected'" : "")>En Serivce</option>
                                                <option value="En panne"  @( ViewBag.Etat == "En panne" ? "selected='selected'" : "")>En Panne</option>
                                                <option value="HS"  @( ViewBag.Etat == "HS" ? "selected='selected'" : "")>H.S</option>
                                                <option value="HMPSI"  @( ViewBag.Etat == "HMPSI" ? "selected='selected'" : "")>H.M.P.S.I</option>
                                            </select>
                                            @Html.ValidationMessageFor(model => model.Etat, "", new { @class = "text-danger" })
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" @( ViewBag.Active != "uc" && ViewBag.Active != "imprimante" ? "hidden" : "")>
                        @Html.LabelFor(model => model.Ip, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Ip, new { htmlAttributes = new { @class = "form-control", placeholder = "IP", maxlength = 30, onblur = "ValidateIPaddress(this)" } })
                                @Html.ValidationMessageFor(model => model.Ip, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>









                    <div class="form-group" @( ViewBag.Active != "uc" && ViewBag.Active != "imprimante" ? "hidden" : "")>
                        @Html.LabelFor(model => model.Modele, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Modele, new { htmlAttributes = new { @class = "form-control", placeholder = "Model", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.Modele, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>






                    <div class="form-group ">
                        @Html.LabelFor(model => model.NumSerie, htmlAttributes: new { @class = "control-label col-md-1" })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.NumSerie, new { htmlAttributes = new { @class = "form-control ", placeholder = "Numéro Serie", @readonly = "true" } })
                                <span class="field-validation-error text-danger"
                                      data-valmsg-for="NumSerie"
                                      data-valmsg-replace="true" id="NumSerieVal"></span>
                            </div>
                        </div>
                    </div>




                    <div class="form-group">
                        @Html.LabelFor(model => model.IMMO, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.IMMO, new { htmlAttributes = new { @class = "form-control", placeholder = "IMMO", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.IMMO, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>

                    <div class="">
                        <label class="control-label col-md-1 align-center"> Emplacement</label>
                        <div class="col-md-5 col-lg-5 align-center">
                            <div class=" ">
                                <div>
                                    <div class="row clearfix">
                                        <div class="form-line col-sm-6">

                                            @Html.DropDownList("poste_Id", null, "Vide", htmlAttributes: new { @class = "form-control show-tick" })
                                            @Html.ValidationMessageFor(model => model.poste_Id, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" @( ViewBag.Active != "uc" ? "hidden" : "")>
                        @Html.LabelFor(model => model.Ram, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Ram, new { htmlAttributes = new { @class = "form-control", placeholder = "Ram", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.Ram, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>


                    <div class="form-group" @( ViewBag.Active != "uc" ? "hidden" : "")>
                        @Html.LabelFor(model => model.System, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.System, new { htmlAttributes = new { @class = "form-control", placeholder = "System", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.System, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>

                    <div class="form-group" @( ViewBag.Active != "point dacces" ? "hidden" : "")>
                        @Html.LabelFor(model => model.SSID1, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.SSID1, new { htmlAttributes = new { @class = "form-control", placeholder = "SSID1", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.System, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>


                    <div class="form-group" @( ViewBag.Active != "point dacces" ? "hidden" : "")>
                        @Html.LabelFor(model => model.SSID2, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.SSID2, new { htmlAttributes = new { @class = "form-control", placeholder = "SSID2", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.System, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Dt_achat, htmlAttributes: new { @class = "control-label col-md-1 align-center " })

                        <div class="col-md-5">
                            <div class="input-group ">
                                <span class="input-group-addon">
                                    <i class="material-icons">date_range</i>
                                </span>
                                <div class="row clearfix">
                                    <div class="col-sm-6">
                                        <div class="form-line">
                                            @Html.EditorFor(model => model.Dt_achat, new { htmlAttributes = new { @class = "form-control", required = true, @type = "date", @Value = Model.Dt_achat.ToString("yyyy-MM-dd") } })
                                            @Html.ValidationMessageFor(model => model.Dt_achat, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>




                    <div class="form-group">
                        @Html.LabelFor(model => model.Garantie, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Garantie, new { htmlAttributes = new { @class = "form-control", placeholder = "Garantie", maxlength = 30 } })
                                @Html.ValidationMessageFor(model => model.System, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>






                    <div class="form-group">

                        @Html.LabelFor(model => model.Dt_sortie, htmlAttributes: new { @class = "control-label col-md-1 align-center " })

                        <div class="col-md-5 col-lg-5">

                            <div class="input-group ">
                                <span class="input-group-addon">
                                    <i class="material-icons">date_range</i>
                                </span>
                                <div class="row clearfix">
                                    <div class="col-sm-6">
                                        <div class="form-line">
                                            @Html.EditorFor(model => model.Dt_sortie, new { htmlAttributes = new { @class = "form-control", onblur = "ValidateDate()", @type = "date", @Value = (Model.Dt_sortie.HasValue ? Model.Dt_sortie.Value.ToString("yyyy-MM-dd") : "") } })
                                            @Html.ValidationMessageFor(model => model.Dt_sortie, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label col-md-1 " })
                        <div class="col-md-5 ">
                            <div class="form-line">
                                @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control ", placeholder = " Description", minlength = 3 } })
                                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>

                    <div class="" style="display:none">
                        @Html.LabelFor(model => model.Categorie, htmlAttributes: new { @class = "control-label col-md-1 align-center " })
                        <div class="col-md-5 ">
                            <div class="">
                                <div class="row clearfix">
                                    <div class="col-sm-6">
                                        <select class="form-control show-tick" name="Categorie" id="Categorie" required>
                                            <option value="">-- Please select --</option>
                                            <option value="uc" @( ViewBag.Active == "uc" ? "selected='selected'" : "")>U.C</option>
                                            <option value="tv" @( ViewBag.Active == "tv" ? "selected='selected'" : "")>TV</option>
                                            <option value="ecran" @( ViewBag.Active == "ecran" ? "selected='selected'" : "")>Ecran</option>
                                            <option value="switch" @( ViewBag.Active == "switch" ? "selected='selected'" : "")>Switch</option>
                                            <option value="imprimante" @( ViewBag.Active == "imprimante" ? "selected='selected'" : "")>Imprimante</option>
                                            <option value="douchette" @( ViewBag.Active == "douchette" ? "selected='selected'" : "")>Douchette</option>
                                            <option value="point dacces" @( ViewBag.Active == "point dacces" ? "selected='selected'" : "")>point d'accès</option>
                                            <option value="telephone" @( ViewBag.Active == "telephone" ? "selected='selected'" : "")>Appareil téléphonique</option>
                                        </select>
                                        @Html.ValidationMessageFor(model => model.Categorie, "", new { @class = "text-danger" })
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="input-group"></div>



                    <div class="form-group ">
                        <div class="col-md-offset-2 col-md-10 align-center ">
                            <input type="submit" value="Update" class="btn btn-success" />
                        </div>
                    </div>
                    <div class="input-group"></div>
                </div>

            </div>
            </div>
            }


        </div>
        @section Scripts {
            <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
            <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>

            <script>
                function ValidateDate() {
                    var dateAchat = $('#Dt_achat').val();
                    var dateSortie = $('#Dt_sortie').val();
                    if ((new Date(dateSortie).getTime() - new Date(dateAchat).getTime()) < 0) {
                        alert('Date Sortie doit etre supperieur a date achat');
                        $('#Dt_sortie').val("");
                        return false;
                    } else {
                        return true;
                    }
                }
                function ValidateIPaddress(inputText) {
                    var ipformat = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
                    if (inputText.value.match(ipformat) || inputText.value == "DHCP" || inputText.value == "") {
                        //document.form1.Ip.focus();
                        return true;
                    }
                    else {
                        alert("You have entered an invalid IP address!");
                        // document.form1.Ip.focus();
                        $('#Ip').val("");


                        return false;

                    }
                }
            </script>
        }
